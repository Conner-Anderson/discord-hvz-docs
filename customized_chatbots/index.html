
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.8">
    
    
      
        <title>Customized Chatbots - Discord-HVZ Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.815d1a91.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="green">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#customized-chatbots" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Discord-HVZ Docs" class="md-header__button md-logo" aria-label="Discord-HVZ Docs" data-md-component="logo">
      
  <img src="../img/avatar.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Discord-HVZ Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Customized Chatbots
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Discord-HVZ Docs" class="md-nav__button md-logo" aria-label="Discord-HVZ Docs" data-md-component="logo">
      
  <img src="../img/avatar.png" alt="logo">

    </a>
    Discord-HVZ Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../running_the_game/" class="md-nav__link">
        Running the Game
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../server_setup/" class="md-nav__link">
        Server Setup
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Customized Chatbots
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Customized Chatbots
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#beginning" class="md-nav__link">
    Beginning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edit-script-fields" class="md-nav__link">
    Edit Script Fields
  </a>
  
    <nav class="md-nav" aria-label="Edit Script Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#script-fields" class="md-nav__link">
    Script Fields
  </a>
  
    <nav class="md-nav" aria-label="Script Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#script-title" class="md-nav__link">
    &lt;script title&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table" class="md-nav__link">
    table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beginning_1" class="md-nav__link">
    beginning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ending" class="md-nav__link">
    ending
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting_processor" class="md-nav__link">
    starting_processor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting_processor_1" class="md-nav__link">
    starting_processor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postable_button_color" class="md-nav__link">
    postable_button_color
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postable_button_label" class="md-nav__link">
    postable_button_label
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questions" class="md-nav__link">
    questions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-fields" class="md-nav__link">
    Question Fields
  </a>
  
    <nav class="md-nav" aria-label="Question Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#column" class="md-nav__link">
    column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display_name" class="md-nav__link">
    display_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query" class="md-nav__link">
    query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid_regex" class="md-nav__link">
    valid_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rejection_response" class="md-nav__link">
    rejection_response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processor" class="md-nav__link">
    processor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-or-remove-questions" class="md-nav__link">
    Add or Remove Questions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-processors" class="md-nav__link">
    Custom Processors
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/" class="md-nav__link">
        Commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../config_options/" class="md-nav__link">
        Config Options
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#beginning" class="md-nav__link">
    Beginning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edit-script-fields" class="md-nav__link">
    Edit Script Fields
  </a>
  
    <nav class="md-nav" aria-label="Edit Script Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#script-fields" class="md-nav__link">
    Script Fields
  </a>
  
    <nav class="md-nav" aria-label="Script Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#script-title" class="md-nav__link">
    &lt;script title&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table" class="md-nav__link">
    table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beginning_1" class="md-nav__link">
    beginning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ending" class="md-nav__link">
    ending
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting_processor" class="md-nav__link">
    starting_processor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting_processor_1" class="md-nav__link">
    starting_processor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postable_button_color" class="md-nav__link">
    postable_button_color
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postable_button_label" class="md-nav__link">
    postable_button_label
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questions" class="md-nav__link">
    questions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-fields" class="md-nav__link">
    Question Fields
  </a>
  
    <nav class="md-nav" aria-label="Question Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#column" class="md-nav__link">
    column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display_name" class="md-nav__link">
    display_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query" class="md-nav__link">
    query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valid_regex" class="md-nav__link">
    valid_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rejection_response" class="md-nav__link">
    rejection_response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processor" class="md-nav__link">
    processor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-or-remove-questions" class="md-nav__link">
    Add or Remove Questions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-processors" class="md-nav__link">
    Custom Processors
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="customized-chatbots">Customized Chatbots<a class="headerlink" href="#customized-chatbots" title="Permanent link">&para;</a></h1>
<div class="admonition warning">
<p class="admonition-title">Under Construction</p>
<p>This page is a work-in-progress, and will inevitably change.</p>
</div>
<p><strong>Before reading this page, you should be familiar<br />
 with everything on the <a href="../running_the_game">Running the Game</a> page.</strong></p>
<h2 id="beginning">Beginning<a class="headerlink" href="#beginning" title="Permanent link">&para;</a></h2>
<p><strong>Chatbots</strong> follow <strong>scripts</strong> which are a series of <strong>questions</strong> with information on what to do with the answers. Scripts also have accompanying information on what to do with the entire set of answers, and what to say to the target member. Think of a script like the piece of paper a survey-taker would use.</p>
<p>Every script requires a <strong>table</strong> in the bot's database, where every row is one completed chatbot. Every question needs a column on the table to store the answer.</p>
<p>The two big, default, <em>required</em> chatbots are <code>registration</code> and <code>tag_logging</code>. Your HvZ game is unique, and requires questions phrased for your situation. By default, the registration script comes with a question for the member's CPO number (that's the school post-box address). Well, your game may not need that. This page will teach you how to remove that question, add new ones, and customize other things in these chatbot scripts.</p>
<p>Scripts are stored in the <code>scripts.yml</code> file, written in the YAML configuration language. It is recommended to use a code editor such as <a href="https://notepad-plus-plus.org/downloads/">Notepad++</a> or one one of many other options.</p>
<p>If you want to do more than change the phrasing of something, read on.</p>
<p><strong>Coming Up</strong></p>
<ul>
<li>Edit script fields</li>
<li>Add or remove questions</li>
<li>Add chatbots</li>
</ul>
<h2 id="edit-script-fields">Edit Script Fields<a class="headerlink" href="#edit-script-fields" title="Permanent link">&para;</a></h2>
<p>Changing text your users see in a chatbot is the easiest thing. Find a phrase in the script and edit it. Surround your text in single quotes if you need to use any of the following special characters: <code>:-{}[]!#|&gt;&amp;%@</code>, or if your text is only "yes", "no", "true", "false", or something similar.</p>
<p>See a <code>|-</code> in the file? That means what comes next is a multi-line piece of text that the bot should see as literally multiple lines.</p>
<p>If you are unsure about using unusual text, read <a href="https://docs.octoprint.org/en/master/configuration/yaml.html">this reference.</a></p>
<p>Below is an example of a functional tag_logging script similar to the one the bot comes with by default. You can use this as reference as you read onward.</p>
<div class="admonition example">
<p class="admonition-title">Example tag_logging Script</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">tag_logging</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tags</span><span class="w"></span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">beginning</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Let&#39;s log a tag. Type &#39;cancel&#39; at any time to stop this conversation.</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">ending</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Tag logged! Make sure your newly-brainless friend feels welcome in the hoard.</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="nt">starting_processor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tag_logging_start</span><span class="w"></span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="nt">ending_processor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tag_logging_end</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">  </span><span class="nt">questions</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tagged_id</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="nt">display_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Tag Code</span><span class="w"></span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What is the tag code of the human you tagged?</span><span class="w"></span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">    </span><span class="nt">valid_regex</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;[a-zA-Z\d]{6}&#39;</span><span class="w"></span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span><span class="nt">rejection_response</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;The</span><span class="nv"> </span><span class="s">tag</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">6</span><span class="nv"> </span><span class="s">characters</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">numbers</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">capital</span><span class="w"></span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">      </span><span class="s">letters.</span><span class="nv"> </span><span class="s">None</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">these:</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">O</span><span class="nv"> </span><span class="s">Q</span><span class="nv"> </span><span class="s">I</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">D</span><span class="nv"> </span><span class="s">V</span><span class="nv"> </span><span class="s">U</span><span class="nv"> </span><span class="s">5</span><span class="nv"> </span><span class="s">S</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">Z&#39;</span><span class="w"></span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">    </span><span class="nt">processor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tag_code_to_member_id</span><span class="w"></span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tag_time</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="nt">display_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Tag Time</span><span class="w"></span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">About what time did the tag happen? Use the format 3:04pm. If it was yesterday, add &quot;yesterday&quot; to the end.</span><span class="w"></span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">    </span><span class="nt">valid_regex</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;(?i)\d{1,2}:[0-5]?[0-9]\s?(am|pm)\s?(yesterday)?&#39;</span><span class="w"></span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">    </span><span class="nt">rejection_response</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Please use a format like 12:26pm or 7:00 am</span><span class="w"></span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">    </span><span class="nt">processor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tag_time</span><span class="w"></span>
</code></pre></div>
</div>
<h3 id="script-fields">Script Fields<a class="headerlink" href="#script-fields" title="Permanent link">&para;</a></h3>
<details class="info">
<summary>Concise Reference.</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">script_name</span><span class="p">:</span><span class="w"> </span><span class="c1"># Name of the script. Only for organization. Required, unique.</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">members</span><span class="w"> </span><span class="c1"># Required, unique</span><span class="w"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nt">beginning</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Registration started!</span><span class="w"> </span><span class="c1"># Message that appears when the chatbot starts. Optional.</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nt">ending</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Welcome to HvZ!</span><span class="w"> </span><span class="c1"># Message that appears when the chatbot ends. Optional.</span><span class="w"></span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="nt">starting_processor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">some_function</span><span class="w"> </span><span class="c1"># Described later in this document. Optional.</span><span class="w"></span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="nt">ending_processor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">another_function</span><span class="w"> </span><span class="c1"># Described later in this document. Optional.</span><span class="w"></span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span><span class="nt">postable_button_color</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">green</span><span class="w"> </span><span class="c1"># Chatbot button color: green, red, blurple. Optional.</span><span class="w"></span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="nt">postable_button_label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Click Me!</span><span class="w"> </span><span class="c1"># Visible label on the chatbot button. Optional.</span><span class="w"></span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">  </span><span class="nt">questions</span><span class="p">:</span><span class="w"> </span><span class="c1"># A list of the questions. Required.</span><span class="w"></span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">favorite_color</span><span class="w"> </span><span class="c1"># The database column the answer will go in. No spaces, lower case. Required, unique per script.</span><span class="w"></span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="nt">display_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Favorite Color</span><span class="w"> </span><span class="c1"># The name of the question the user will see. Required.</span><span class="w"></span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Favorite color?</span><span class="w"> </span><span class="c1"># The question text. Required.</span><span class="w"></span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="nt">valid_regex</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;\D*&#39;</span><span class="w"> </span><span class="c1"># The regex the answer must satisfy. Optional.</span><span class="w"></span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="nt">rejection_response</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">No numbers allowed in colors.</span><span class="w"> </span><span class="c1"># Response if the answer fails the regex test. Required if there is &quot;valid_regex&quot;</span><span class="w"></span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="nt">processor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">favorite_color</span><span class="w"> </span><span class="c1"># Described later in this document. Optional</span><span class="w"></span>
</code></pre></div>
</details>
<h4 id="script-title"><code>&lt;script title&gt;</code><a class="headerlink" href="#script-title" title="Permanent link">&para;</a></h4>
<p>Required, unique</p>
<p>In the example above, the word <code>tag_logging</code> at the top declares that everything indented beneath it is the tag_logging script. If this name changes, any existing buttons for this chatbot will break.</p>
<h4 id="table"><code>table</code><a class="headerlink" href="#table" title="Permanent link">&para;</a></h4>
<p>Required, unique. 
Which table the script will be saved to. This table must be defined in the config file; see <a href="../config_options/#database_tables">Config Options: database_tables</a></p>
<h4 id="beginning_1"><code>beginning</code><a class="headerlink" href="#beginning_1" title="Permanent link">&para;</a></h4>
<p>Optional<br />
A message sent when the chatbot starts. It should inform the user that they can type "cancel" to stop the chatbot as well.</p>
<h4 id="ending"><code>ending</code><a class="headerlink" href="#ending" title="Permanent link">&para;</a></h4>
<p>Optional
A message sent when the chatbot ends. Preferably, it should tell the player what they ought to do next.</p>
<h4 id="starting_processor"><code>starting_processor</code><a class="headerlink" href="#starting_processor" title="Permanent link">&para;</a></h4>
<p>Optional<br />
The name of the starting processor function the script should use. Processors are described further below. If you make a new script and haven't made a new processor, this should be removed.</p>
<h4 id="starting_processor_1"><code>starting_processor</code><a class="headerlink" href="#starting_processor_1" title="Permanent link">&para;</a></h4>
<p>Optional<br />
The name of the ending processor function the script should use. Processors are described further below. If you make a new script and haven't made a new processor, this should be removed.</p>
<h4 id="postable_button_color"><code>postable_button_color</code><a class="headerlink" href="#postable_button_color" title="Permanent link">&para;</a></h4>
<p>Optional<br />
The color of the button used to start the chatbot. Valid values: <strong>blurple, gray, green, red, url</strong>. These colors are limited by Discord. Green by default.</p>
<h4 id="postable_button_label"><code>postable_button_label</code><a class="headerlink" href="#postable_button_label" title="Permanent link">&para;</a></h4>
<p>Optional<br />
The text that appears on the button used to start the chatbot. If not supplied, this will be the same as the script title.</p>
<h4 id="questions"><code>questions</code><a class="headerlink" href="#questions" title="Permanent link">&para;</a></h4>
<p>Minimum 1 question<br />
Questions are indented beneath this heading, marked with a <code>-</code> as shown in the example. They are asked in the order listed here.</p>
<h3 id="question-fields">Question Fields<a class="headerlink" href="#question-fields" title="Permanent link">&para;</a></h3>
<h4 id="column"><code>column</code><a class="headerlink" href="#column" title="Permanent link">&para;</a></h4>
<p>Required, unique per script<br />
The database column the question is saves to. When the bot is working with the question, this is effectively its "name". Remember, database column names should be lower case and without spaces. A name like "most_favorite_color" is fine.</p>
<h4 id="display_name"><code>display_name</code><a class="headerlink" href="#display_name" title="Permanent link">&para;</a></h4>
<p>Optional<br />
The human-friendly name users are showed when reviewing their responses.</p>
<h4 id="query"><code>query</code><a class="headerlink" href="#query" title="Permanent link">&para;</a></h4>
<p>Required<br />
The text of the question. Make sure it is concise, but unambiguous for best human results.</p>
<h4 id="valid_regex"><code>valid_regex</code><a class="headerlink" href="#valid_regex" title="Permanent link">&para;</a></h4>
<p>Optional<br />
Regex means "regular_expression", which is a special language for pattern matching. For example, <code>(?i)(yes|no)</code> is a set of coded symbols that tells the program it needs to match either "yes" or "no", ignoring case.</p>
<p>If <code>valid_regex</code> is provided, the bot will check the question's answer against the regex string, and if it matches <em>completely</em>, the answer is accepted. Note that any leading or trailing whitespace is stripped away from answers before this.</p>
<p>There are many resources online for building regex, including this one: <a href="https://regex101.com/">regex101.com</a></p>
<h4 id="rejection_response"><code>rejection_response</code><a class="headerlink" href="#rejection_response" title="Permanent link">&para;</a></h4>
<p>Required if <code>valid_regex</code> is supplied.<br />
The response the user is sent if their answer fails the regex test. They are given the opportunity to submit another response until they send a valid one.</p>
<h4 id="processor"><code>processor</code><a class="headerlink" href="#processor" title="Permanent link">&para;</a></h4>
<p>Optional<br />
Processors are an advanced feature described in their own section below. They can replace the functionality of regex, and make many checks that regex can't. They can customize their error responses to users, and transform the response into another form.</p>
<h2 id="add-or-remove-questions">Add or Remove Questions<a class="headerlink" href="#add-or-remove-questions" title="Permanent link">&para;</a></h2>
<p>To add a question, these are the basic steps:</p>
<ul>
<li>Add a new question section to a script in <code>scripts.yml</code> via copy-paste</li>
<li>Edit the values to your liking, making sure to pick a new column name</li>
<li>Add a new column to the <a href="../config_options/#database_tables">database_tables</a> section of <code>config.yml</code></li>
<li>Delete your existing database file <code>hvzdb.db</code> and restart the bot, which will re-create it with your new column.</li>
<li>Test the chatbot!</li>
</ul>
<p>When using copy-paste to add a new question, make sure the indentation lines up. Indentation is made with spaces, not tabs.</p>
<p>When adding a database column to <code>config.yml</code>, you should set the type to <code>String</code> unless you are using processors.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The bot will <em>not</em> add new columns to an existing database. This is called "migration" is and something the bot does not support for safety reasons. If you delete your database, the bot will create a fresh one that includes your new columns. If you need to add new columns without deleting your database, use a database editor such as <a href="https://sqlitebrowser.org/">DB Browser for SQLite</a>.</p>
</div>
<p>You ought to thouroughly test the new question to make sure it looks the way you want, especially if you are using regex or processor functions.</p>
<p>To remove a question, these are the basic steps:</p>
<ul>
<li>Delete the question section in its script in <code>scripts.yml</code></li>
<li>Optional: Remove the column from the database table in <code>config.yml</code>, then delete the database and restart the bot to remake it.</li>
</ul>
<p>Having a database column with no corresponding question is perfectly fine, though it will still appear on the Google Sheet.</p>
<h2 id="custom-processors">Custom Processors<a class="headerlink" href="#custom-processors" title="Permanent link">&para;</a></h2>
<p>A script or question processor is a python function that, given a user response, determines how the bot should react. For example, when a player enters a tag code into the Tag Logging chatbot, the response is sent through a question processor function which finds a match for that code in the database. If there's a match, it returns the tagged player's ID which is saved as the question response. If there's no match, the player is prompted to try again. These processors could be as simple as duplicating the effects of regex, but are intended for creative uses.</p>
<div class="admonition warning">
<p class="admonition-title">Under Construction</p>
<p>Custom processors are a complex feature that could lead to many pitfalls. The documentation still needs to be written. For now, if you want custom functionality, contact the author of Discord HvZ.</p>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../server_setup/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Server Setup" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Server Setup
            </div>
          </div>
        </a>
      
      
        
        <a href="../commands/" class="md-footer__link md-footer__link--next" aria-label="Next: Commands" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Commands
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.sections", "content.tabs.link"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>